<?php
include('layouts/header.php');
?>
<!---Contact Page---->
<section id="contact" class="contact-section" style="padding: 80px 0; background: linear-gradient(180deg, #f8f6f4 0%, #ffffff 40%, #f8f6f4 100%);">
  <div class="container">
    <!-- Page Header -->
    <div class="contact-header text-center mb-5">
      <h2 class="contact-title" style="font-size: 2.2rem; font-weight: 700; color: #714423;">Get In Touch</h2>
      <p class="contact-subtitle" style="max-width: 520px; margin: 10px auto 0; color: #666; font-size: 0.98rem;">We'd love to hear from you. Send us a message and we'll respond as soon as possible.</p>
      <hr class="contact-divider" style="width: 80px; height: 3px; border-radius: 999px; background-color: #714423; opacity: 1; margin: 25px auto 0;">
    </div>

    <div class="row g-4">
      <!-- Contact Information Cards -->
      <div class="col-lg-4 col-md-6">
        <div class="contact-info-card" style="background-color: #ffffff; border-radius: 16px; padding: 22px 20px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06); border: 1px solid #eee3d9; height: 100%;">
          <div class="contact-icon" style="width: 46px; height: 46px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; background: radial-gradient(circle at 30% 30%, #f9e3cf, #e5c19d); color: #714423; box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);">
            <i class="fas fa-map-marker-alt" style="font-size: 1.1rem;"></i>
          </div>
          <h5 style="font-size: 1rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Our Address</h5>
          <p style="margin: 0; color: #555; font-size: 0.95rem;">Samakhushi, Kathmandu<br>Nepal</p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6">
        <div class="contact-info-card" style="background-color: #ffffff; border-radius: 16px; padding: 22px 20px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06); border: 1px solid #eee3d9; height: 100%;">
          <div class="contact-icon" style="width: 46px; height: 46px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; background: radial-gradient(circle at 30% 30%, #f9e3cf, #e5c19d); color: #714423; box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);">
            <i class="fas fa-phone-alt" style="font-size: 1.1rem;"></i>
          </div>
          <h5 style="font-size: 1rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Phone Number</h5>
          <p style="margin: 0; color: #555; font-size: 0.95rem;">+855 762-313-443<br>076-231-3443</p>
        </div>
      </div>

      <div class="col-lg-4 col-md-6">
        <div class="contact-info-card" style="background-color: #ffffff; border-radius: 16px; padding: 22px 20px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06); border: 1px solid #eee3d9; height: 100%;">
          <div class="contact-icon" style="width: 46px; height: 46px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; background: radial-gradient(circle at 30% 30%, #f9e3cf, #e5c19d); color: #714423; box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);">
            <i class="fas fa-envelope" style="font-size: 1.1rem;"></i>
          </div>
          <h5 style="font-size: 1rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Email Address</h5>
          <p style="margin: 0; color: #555; font-size: 0.95rem;">sroundavit@email.com<br>support@furniturestore.com</p>
        </div>
      </div>

      <!-- Business Hours -->
      <div class="col-lg-4 col-md-6">
        <div class="contact-info-card" style="background-color: #ffffff; border-radius: 16px; padding: 22px 20px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06); border: 1px solid #eee3d9; height: 100%;">
          <div class="contact-icon" style="width: 46px; height: 46px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; background: radial-gradient(circle at 30% 30%, #f9e3cf, #e5c19d); color: #714423; box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);">
            <i class="fas fa-clock" style="font-size: 1.1rem;"></i>
          </div>
          <h5 style="font-size: 1rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Business Hours</h5>
          <p style="margin: 0; color: #555; font-size: 0.95rem;">
            Monday - Friday: 9:00 AM - 7:00 PM<br>
            Saturday: 10:00 AM - 6:00 PM<br>
            Sunday: 11:00 AM - 5:00 PM
          </p>
        </div>
      </div>

      <!-- Customer Support -->
      <div class="col-lg-4 col-md-6">
        <div class="contact-info-card" style="background-color: #ffffff; border-radius: 16px; padding: 22px 20px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06); border: 1px solid #eee3d9; height: 100%;">
          <div class="contact-icon" style="width: 46px; height: 46px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; background: radial-gradient(circle at 30% 30%, #f9e3cf, #e5c19d); color: #714423; box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);">
            <i class="fas fa-headset" style="font-size: 1.1rem;"></i>
          </div>
          <h5 style="font-size: 1rem; font-weight: 600; color: #714423; margin-bottom: 6px;">24/7 Support</h5>
          <p style="margin: 0; color: #555; font-size: 0.95rem;">We work 24/7 to answer your questions and provide assistance whenever you need us.</p>
        </div>
      </div>

      <!-- Social Media -->
      <div class="col-lg-4 col-md-6">
        <div class="contact-info-card" style="background-color: #ffffff; border-radius: 16px; padding: 22px 20px; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06); border: 1px solid #eee3d9; height: 100%;">
          <div class="contact-icon" style="width: 46px; height: 46px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; background: radial-gradient(circle at 30% 30%, #f9e3cf, #e5c19d); color: #714423; box-shadow: 0 8px 18px rgba(0, 0, 0, 0.12);">
            <i class="fas fa-share-alt" style="font-size: 1.1rem;"></i>
          </div>
          <h5 style="font-size: 1rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Follow Us</h5>
          <div class="social-links" style="display: flex; gap: 10px; margin-top: 8px;">
            <a href="https://www.facebook.com/de.vith.74062" target="_blank" class="social-link" style="width: 34px; height: 34px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; text-decoration: none; color: #714423; background-color: #f7eee7;">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://www.instagram.com/_saksham_stha_59/" target="_blank" class="social-link" style="width: 34px; height: 34px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; text-decoration: none; color: #714423; background-color: #f7eee7;">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="#" class="social-link" style="width: 34px; height: 34px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; text-decoration: none; color: #714423; background-color: #f7eee7;">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="social-link" style="width: 34px; height: 34px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; text-decoration: none; color: #714423; background-color: #f7eee7;">
              <i class="fab fa-linkedin-in"></i>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Form and Map Section -->
    <div class="row mt-5 g-4">
      <!-- Contact Form -->
      <div class="col-lg-7">
        <div class="contact-form-wrapper" style="background-color: #ffffff; border-radius: 18px; padding: 28px 24px; box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08); border: 1px solid #eee3d9;">
          <h4 class="form-title" style="font-size: 1.3rem; font-weight: 600; color: #714423; margin-bottom: 16px;">Send Us a Message</h4>
          <form id="contact-form" class="contact-form">
            <div class="row g-3">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="name" style="font-size: 0.9rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Your Name <span class="required" style="color: #d9534f;">*</span></label>
                  <input type="text" class="form-control" id="name" name="name" placeholder="Enter your name" required style="font-size: 0.95rem; border-radius: 10px; border: 2px solid #e4e1dd; background-color: #faf9f7; padding: 10px 12px;">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="email" style="font-size: 0.9rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Your Email <span class="required" style="color: #d9534f;">*</span></label>
                  <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email" required style="font-size: 0.95rem; border-radius: 10px; border: 2px solid #e4e1dd; background-color: #faf9f7; padding: 10px 12px;">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="phone" style="font-size: 0.9rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Phone Number</label>
                  <input type="tel" class="form-control" id="phone" name="phone" placeholder="Enter your phone number" style="font-size: 0.95rem; border-radius: 10px; border: 2px solid #e4e1dd; background-color: #faf9f7; padding: 10px 12px;">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="subject" style="font-size: 0.9rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Subject <span class="required" style="color: #d9534f;">*</span></label>
                  <input type="text" class="form-control" id="subject" name="subject" placeholder="What is this regarding?" required style="font-size: 0.95rem; border-radius: 10px; border: 2px solid #e4e1dd; background-color: #faf9f7; padding: 10px 12px;">
                </div>
              </div>
              <div class="col-12">
                <div class="form-group">
                  <label for="message" style="font-size: 0.9rem; font-weight: 600; color: #714423; margin-bottom: 6px;">Your Message <span class="required" style="color: #d9534f;">*</span></label>
                  <textarea class="form-control" id="message" name="message" rows="6" placeholder="Tell us how we can help you..." required style="font-size: 0.95rem; border-radius: 10px; border: 2px solid #e4e1dd; background-color: #faf9f7; padding: 10px 12px;"></textarea>
                </div>
              </div>
              <div class="col-12">
                <button type="submit" class="submit-btn" style="background: linear-gradient(135deg, #714423 0%, #97704f 100%); color: #ffffff; border: none; border-radius: 999px; padding: 10px 24px; font-size: 0.95rem; font-weight: 600; display: inline-flex; align-items: center; gap: 8px; cursor: pointer;">
                  <i class="fas fa-paper-plane me-2"></i>Send Message
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Map Section -->
      <div class="col-lg-5">
        <div class="map-wrapper" style="background-color: #ffffff; border-radius: 18px; padding: 20px 18px 18px; box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08); border: 1px solid #eee3d9; height: 100%;">
          <h4 class="map-title" style="font-size: 1.2rem; font-weight: 600; color: #714423; margin-bottom: 10px;">Find Us</h4>
          <div class="map-container">
            <iframe 
              src="https://maps.google.com/maps?q=11.5761468,104.9230891&hl=en&z=16&output=embed"
              width="100%" 
              height="450" 
              style="border:0; border-radius: 10px;" 
              allowfullscreen="" 
              loading="lazy" 
              referrerpolicy="no-referrer-when-downgrade">
            </iframe>
          </div>
          <div class="map-info mt-3">
            <p class="mb-1" style="font-size: 0.9rem; color: #555;"><i class="fas fa-map-marker-alt me-2"></i>Phnom Penh, Cambodia  </p>
            <a href="https://www.google.com/maps/place/Wat+Phnom+Daun+Penh/" target="_blank" class="map-link" style="display: inline-flex; align-items: center; gap: 6px; color: #714423; font-weight: 500; text-decoration: none;">
              <i class="fas fa-external-link-alt me-2"></i>View on Google Maps
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Additional Information -->
    <div class="row mt-5">
      <div class="col-12">
        <div class="additional-info" style="background-color: #ffffff; padding: 24px 22px; border-radius: 18px; box-shadow: 0 10px 26px rgba(0, 0, 0, 0.06); border: 1px solid #eee3d9;">
          <h4 class="info-title" style="font-size: 1.2rem; font-weight: 600; color: #714423;">Why Choose Us?</h4>
          <div class="row g-4 mt-2">
            <div class="col-md-4">
              <div class="info-item" style="display: flex; flex-direction: column; align-items: flex-start; gap: 10px; padding: 15px; background: #f8f6f4; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.04);">
                <i class="fas fa-shipping-fast" style="font-size: 1.4rem; color: #714423;"></i>
                <h6 style="font-weight: 600; color: #714423; margin-bottom: 0;">Free Shipping</h6>
                <p style="margin: 0; color: #555; font-size: 0.95rem;">Free delivery on orders over $100</p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="info-item" style="display: flex; flex-direction: column; align-items: flex-start; gap: 10px; padding: 15px; background: #f8f6f4; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.04);">
                <i class="fas fa-undo-alt" style="font-size: 1.4rem; color: #714423;"></i>
                <h6 style="font-weight: 600; color: #714423; margin-bottom: 0;">Easy Returns</h6>
                <p style="margin: 0; color: #555; font-size: 0.95rem;">30-day return policy on all items</p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="info-item" style="display: flex; flex-direction: column; align-items: flex-start; gap: 10px; padding: 15px; background: #f8f6f4; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.04);">
                <i class="fas fa-shield-alt" style="font-size: 1.4rem; color: #714423;"></i>
                <h6 style="font-weight: 600; color: #714423; margin-bottom: 0;">Secure Payment</h6>
                <p style="margin: 0; color: #555; font-size: 0.95rem;">100% secure payment processing</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
// Contact Form Handler
document.getElementById('contact-form').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const submitBtn = this.querySelector('.submit-btn');
  const originalText = submitBtn.innerHTML;
  
  // Get form data
  const formData = new FormData(this);
  
  // Simple validation
  const name = document.getElementById('name').value.trim();
  const email = document.getElementById('email').value.trim();
  const subject = document.getElementById('subject').value.trim();
  const message = document.getElementById('message').value.trim();
  
  if (!name || !email || !subject || !message) {
    showMessage('Please fill in all required fields.', 'error');
    return;
  }
  
  // Email validation
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    showMessage('Please enter a valid email address.', 'error');
    return;
  }
  
  // Show loading state
  submitBtn.classList.add('loading');
  submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Sending...';
  submitBtn.disabled = true;
  
  // Send data to server
  // Path is relative to contact.php location (root directory)
  const handlerPath = 'server/contact_handler.php';
  
  console.log('Sending form to:', handlerPath);
  console.log('Current URL:', window.location.href);
  
  // Send data to server
  fetch(handlerPath, {
    method: 'POST',
    body: formData
    // Don't set Content-Type header - browser will set it automatically with boundary for FormData
  })
  .then(response => {
    // Check if response is ok
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    // Try to parse as JSON
    return response.text().then(text => {
      try {
        return JSON.parse(text);
      } catch (e) {
        console.error('Response text:', text);
        throw new Error('Invalid JSON response from server');
      }
    });
  })
  .then(data => {
    if (data && data.success) {
      showMessage(data.message, 'success');
      this.reset();
    } else {
      showMessage(data.message || 'Error sending message. Please try again.', 'error');
    }
  })
  .catch(error => {
    console.error('Error details:', error);
    console.error('Error message:', error.message);
    
    // More specific error messages
    let errorMsg = 'Network error. Please check your connection and try again.';
    if (error.message.includes('HTTP error')) {
      errorMsg = 'Server error. Please try again later.';
    } else if (error.message.includes('JSON')) {
      errorMsg = 'Server response error. Please contact support.';
    }
    
    showMessage(errorMsg, 'error');
  })
  .finally(() => {
    // Reset button state
    submitBtn.classList.remove('loading');
    submitBtn.innerHTML = originalText;
    submitBtn.disabled = false;
  });
});

// Show message function
function showMessage(message, type) {
  // Remove existing messages
  const existingMsg = document.querySelector('.form-message');
  if (existingMsg) {
    existingMsg.remove();
  }
  
  // Create message element
  const messageDiv = document.createElement('div');
  messageDiv.className = `form-message alert alert-${type === 'success' ? 'success' : 'danger'}`;
  messageDiv.style.cssText = `
    padding: 15px 20px;
    margin: 20px 0;
    border-radius: 10px;
    font-weight: 500;
    animation: slideDown 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    ${type === 'success' 
      ? 'background: linear-gradient(135deg, #d4edda, #c3e6cb); color: #155724; border: 2px solid #c3e6cb;' 
      : 'background: linear-gradient(135deg, #f8d7da, #f5c6cb); color: #721c24; border: 2px solid #f5c6cb;'
    }
  `;
  messageDiv.innerHTML = `
    <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'} me-2"></i>
    ${message}
  `;
  
  // Insert message
  const form = document.getElementById('contact-form');
  form.parentNode.insertBefore(messageDiv, form);
  
  // Auto remove after 5 seconds
  setTimeout(() => {
    messageDiv.style.animation = 'slideUp 0.3s ease';
    setTimeout(() => messageDiv.remove(), 300);
  }, 5000);
  
  // Scroll to message
  messageDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes slideUp {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-20px);
    }
  }
`;
document.head.appendChild(style);
</script>

<?php
  include('layouts/footer.php');
?>